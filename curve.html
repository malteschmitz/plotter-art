<!doctype html>
<html>
<head>
	<title>Catmullâ€“Rom spline</title>
	<meta charset='utf-8'>
</head>
<body>
<svg id="svg" xmlns="http://www.w3.org/2000/svg" width="800" viewBox="0 0 50 50"></svg>

<script>
  // P0 = 5,5
  // P1 = 15,15
  // P2 = 25,5
  // P3 = 30,8

  // https://stackoverflow.com/questions/30748316/catmull-rom-interpolation-on-svg-paths

  // t0=0, t1=1, t2=2, t3=3 for alpha=0

  // c1 = (t2-t1)/(t2-t0),
  // c2 = (t1-t0)/(t2-t0),
  // d1 = (t3-t2)/(t3-t1),
  // d2 = (t2-t1)/(t3-t1)

  // M1 = (t2-t1)*(c1*(P1-P0)/(t1-t0) + c2*(P2-P1)/(t2-t1))
  // M2 = (t2-t1)*(d1*(P2-P1)/(t2-t1) + d2*(P3-P2)/(t3-t2))

  // Q0 = P1
  // Q1 = P1 + M1/3
  // Q2 = P2 - M2/3
  // Q3 = P2

  let P0 = [5,5];
  let P1 = [15,15];
  let P2 = [25,5];
  let P3 = [30,8];

  let t0=0, t1=1, t2=2, t3=3;

  let c1 = (t2-t1)/(t2-t0); // 1/2
  let c2 = (t1-t0)/(t2-t0); // 1/2
  let d1 = (t3-t2)/(t3-t1); // 1/2
  let d2 = (t2-t1)/(t3-t1); // 1/2

  let M1 = [(t2-t1)*(c1*(P1[0]-P0[0])/(t1-t0) + c2*(P2[0]-P1[0])/(t2-t1)), (t2-t1)*(c1*(P1[1]-P0[1])/(t1-t0) + c2*(P2[1]-P1[1])/(t2-t1))];
  let M2 = [(t2-t1)*(d1*(P2[0]-P1[0])/(t2-t1) + d2*(P3[0]-P2[0])/(t3-t2)), (t2-t1)*(d1*(P2[1]-P1[1])/(t2-t1) + d2*(P3[1]-P2[1])/(t3-t2))];

  let Q0 = P1;
  let Q1 = [P1[0] + M1[0]/3, P1[1] + M1[1]/3];
  let Q2 = [P2[0] - M2[0]/3, P2[1] - M2[1]/3];
  let Q3 = P2;

  function newSvg(tag) {
    return document.createElementNS("http://www.w3.org/2000/svg", tag);
  }

  let color = "red";

  function point(p) {
    let [x,y] = p;
    let circle = newSvg("circle");
    circle.setAttribute("fill", color);
    circle.setAttribute("r", "0.2");
    circle.setAttribute("cx", x);
    circle.setAttribute("cy", y);
    svg.appendChild(circle);
  }

  point(P0);
  point(P1);
  point(P2);
  point(P3);

  console.log(M1, M2);

  color = "blue";

  point(Q0);
  point(Q1);
  point(Q2);
  point(Q3);

  let path = newSvg("path");
  path.setAttribute("stroke", "black");
  path.setAttribute("fill", "transparent");
  path.setAttribute("d", `M ${Q0[0]} ${Q0[1]} C ${Q1[0]} ${Q1[1]}, ${Q2[0]} ${Q2[1]}, ${Q3[0]} ${Q3[1]}`);
  svg.appendChild(path);
</script>

</body>
</html>
